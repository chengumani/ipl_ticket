
CREATE DATABASE ipl_ticket_booking;
USE ipl_ticket_booking;

CREATE TABLE user (
    userid INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    phone VARCHAR(15) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL
);



CREATE TABLE admin (
    adminid INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    password VARCHAR(100) NOT NULL
);


CREATE TABLE teams (
    teamid INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    captain VARCHAR(100) NOT NULL,
    coach VARCHAR(100) NOT NULL
);

CREATE TABLE stadium (
    stadiumid INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    location VARCHAR(100) NOT NULL,
    capacity INT NOT NULL
);


CREATE TABLE matches (
    matchid INT AUTO_INCREMENT PRIMARY KEY,
    team1_id INT NOT NULL,
    team2_id INT NOT NULL,
    match_date DATE NOT NULL,
    stadiumid INT NOT NULL,
    FOREIGN KEY (team1_id) REFERENCES teams(teamid),
    FOREIGN KEY (team2_id) REFERENCES teams(teamid),
    FOREIGN KEY (stadiumid) REFERENCES stadium(stadiumid)
);



CREATE TABLE ticket (
    ticketid INT AUTO_INCREMENT PRIMARY KEY,
    matchid INT NOT NULL,
    seat_no VARCHAR(10) NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (matchid) REFERENCES matches(matchid)
);

CREATE TABLE payment (
    paymentid INT AUTO_INCREMENT PRIMARY KEY,
    userid INT NOT NULL,
    ticketid INT NOT NULL,
    payment_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    payment_status VARCHAR(50),  -- No default, user must supply value
    FOREIGN KEY (userid) REFERENCES user(userid),
    FOREIGN KEY (ticketid) REFERENCES ticket(ticketid)
);


